.\"-
.\" Copyright (c) 2019, Tobias Kortkamp <tobik@FreeBSD.org>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\"
.\" THIS SOFTWARE IS PROVIDED BY ``AS IS'' AND ANY EXPRESS OR IMPLIED
.\" WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN
.\" NO EVENT SHALL I BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
.\" EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
.\" PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
.\" PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
.\" LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
.\" NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
.\" SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd February 13, 2019
.Dt PORTFMT 1
.Os
.Sh NAME
.Nm portfmt
.Nd "format FreeBSD Ports Collection Makefiles"
.Sh SYNOPSIS
.Nm
.Op Fl i
.Op Fl u
.Op Fl w Ar wrapcol
.Op Ar file
.Sh DESCRIPTION
If the optional
.Ar file
argument is not given, the Makefile will be read from stdin.
This can be useful for editor integration where you might want to
only format portions of your Makefile.
.Pp
The following options are available:
.Bl -tag -width indent
.It Fl i
Format Makefile in-place instead of outputting it to stdout.
.It Fl u
Leave variables unsorted.
.It Fl w Ar wrapcol
Sets the wrapping column to
.Ar wrapcol
(default: 80).
This is a goal not a hard value.
It will be ignored for several variables like COMMENT, DISTFILES,
MASTER_SITES, etc.
.Pp
With a value of -1 it is ignored for all variables.
Previously wrapped variable will be concatenated onto a single line.
.El
.Sh EXAMPLES
In-place format
.Pa /usr/ports/audio/sndio/Makefile :
.Bd -literal -offset indent
portfmt -i /usr/ports/audio/sndio/Makefile
.Ed
.Pp
For integrating
.Nm
with the Kakoune editor, add this to your
.Pa ~/.config/kak/kakrc ,
which maps portfmt to
.Sy ,1 :
.Bd -literal -offset 0
map global user 1 '|portfmt<ret>;' -docstring "portfmt on selection"
.Ed
.Sh SEE ALSO
.Xr ports 7
.Sh AUTHORS
.An Tobias Kortkamp Aq Mt tobik@FreeBSD.org
